class Solution {
public:
    int traversal(int i, int j, vector<vector<int>> &matrix, vector<vector<int>> &dp) {
        int n = matrix.size(); 
        if (i >= n) return 0; 
        if (j < 0 || j >= n) return 100000; 
        if (i == n - 1) {
            return matrix[i][j]; 
        }
        if (dp[i][j] != 100000) return dp[i][j]; 
        int left = matrix[i][j] + traversal(i + 1, j - 1, matrix, dp); 
        int below = matrix[i][j] + traversal(i + 1, j, matrix, dp); 
        int right = matrix[i][j] + traversal(i + 1, j + 1, matrix, dp); 
        dp[i][j] = min({left, below, right}); 
        return dp[i][j]; 
    }
    int minFallingPathSum(vector<vector<int>>& matrix) {
        int n = matrix.size(); 
        vector<vector<int>> dp (n, vector<int>(n, 100000)); 
        int minpathSum = INT_MAX; 
        for (int j = 0; j < n; j++) {
            minpathSum = min(minpathSum, traversal(0, j, matrix, dp)); 
        }
        return minpathSum; 
    }
};
